<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer Assistant</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="main-container">
        <!-- Left Pane -->
        <div class="left-pane">
            <!-- Command Input Section -->
            <div class="input-section">
                <div class="input-row">
                    <input 
                        type="text" 
                        id="commandInput" 
                        placeholder="Type your timer command here..." 
                        class="command-input"
                        autocomplete="off"
                    >
                    <button id="enterButton" class="enter-button">Enter</button>
                </div>
            </div>

            <!-- Output Section -->
            <div class="output-section">
                <div class="output-container">
                    <div id="outputText" class="output-text" tabindex="0"></div>
                </div>
            </div>

            <!-- Button Section -->
            <div class="button-section">
                <button id="audioSettingsButton" class="action-button">Audio Settings</button>
                <button id="regimensButton" class="action-button">Regimens</button>
                <button id="helpButton" class="action-button help-button">Help</button>
            </div>
        </div>

        <!-- Right Pane -->
        <div class="right-pane">
            <div class="timer-header">
                <h3>Active Timers</h3>
            </div>
            <div id="activeTimersContainer" class="active-timers-container">
                <!-- Active timers will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Audio Settings Modal -->
    <div id="audioSettingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Audio Settings</h2>
                <button class="close-button" id="closeAudioSettings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="frequencySlider">Beep Frequency (Hz): <span id="frequencyValue">880</span></label>
                    <input type="range" id="frequencySlider" min="200" max="2000" value="880" class="slider">
                </div>
                
                <div class="setting-group">
                    <label for="durationSlider">Beep Duration (ms): <span id="durationValue">500</span></label>
                    <input type="range" id="durationSlider" min="100" max="2000" value="500" class="slider">
                </div>
                
                <div class="setting-group">
                    <label for="intervalSlider">Interval Between Beeps (seconds): <span id="intervalValue">1.0</span></label>
                    <input type="range" id="intervalSlider" min="0.1" max="5.0" step="0.1" value="1.0" class="slider">
                </div>
                
                <div class="setting-group">
                    <label for="timeoutSlider">Max Alert Duration (seconds): <span id="timeoutValue">120</span></label>
                    <input type="range" id="timeoutSlider" min="10" max="600" value="120" class="slider">
                </div>
            </div>
            <div class="modal-footer">
                <button id="testBeepButton" class="modal-button">Test Beep</button>
                <button id="saveSettingsButton" class="modal-button">Save Settings</button>
                <button id="applyCloseButton" class="modal-button primary">Apply & Close</button>
            </div>
        </div>
    </div>

    <!-- Regimens Modal -->
    <div id="regimensModal" class="modal hidden">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>Regimen Management</h2>
                <button class="close-button" id="closeRegimens">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="view">View Regimens</button>
                        <button class="tab-button" data-tab="create">Create Regimen</button>
                    </div>
                    
                    <!-- View Regimens Tab -->
                    <div id="viewTab" class="tab-content active">
                        <h3>Available Regimens:</h3>
                        <div class="regimen-list-container">
                            <div id="regimenList" class="regimen-list"></div>
                        </div>
                        <div class="run-regimen-section">
                            <label for="runRegimenInput">Run regimen:</label>
                            <input type="text" id="runRegimenInput" placeholder="Enter regimen name">
                            <button id="runRegimenButton" class="modal-button">Run</button>
                        </div>
                    </div>
                    
                    <!-- Create Regimen Tab -->
                    <div id="createTab" class="tab-content">
                        <div class="create-regimen-form">
                            <div class="form-group">
                                <label for="regimenName">Regimen Name:</label>
                                <input type="text" id="regimenName" placeholder="Enter regimen name">
                            </div>
                            
                            <h4>Timers in sequence:</h4>
                            <div id="timerEntries" class="timer-entries">
                                <!-- Timer entries will be added dynamically -->
                            </div>
                            
                            <div class="form-actions">
                                <button id="addTimerButton" class="modal-button">Add Timer</button>
                                <button id="saveRegimenButton" class="modal-button primary">Save Regimen</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for modals -->
    <div id="modalOverlay" class="modal-overlay hidden"></div>

    <!-- Include JavaScript files -->
    <script src="js/timer-manager.js"></script>
    <script src="js/command-interpreter.js"></script>
    <script src="js/alert-manager.js"></script>
    <script src="js/regimen-manager.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new TimerApp();
        });
    </script>
</body>
</html>